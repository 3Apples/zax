!function(e){function t(t){for(var l,s,u=t[0],i=t[1],o=t[2],d=0,f=[];d<u.length;d++)s=u[d],r[s]&&f.push(r[s][0]),r[s]=0;for(l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l]);for(c&&c(t);f.length;)f.shift()();return n.push.apply(n,o||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],l=!0,u=1;u<a.length;u++){var i=a[u];0!==r[i]&&(l=!1)}l&&(n.splice(t--,1),e=s(s.s=a[0]))}return e}var l={},r={2:0},n=[];function s(t){if(l[t])return l[t].exports;var a=l[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=l,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var u=window.webpackJsonp=window.webpackJsonp||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var o=0;o<u.length;o++)t(u[o]);var c=i;n.push([89,0]),a()}({51:function(e,t,a){"use strict";(function(l){var r,n=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}();void 0===(r=function(e){var t=a(2),l=(a(6),a(1));a(6),a(5);return function(e){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={match:"initial",password:null,value_1:null,value_2:null},t.input_1=l.createRef(),t.input_2=l.createRef(),t.check_1=t.check_1.bind(t),t.check_2=t.check_2.bind(t),t.getPassword=t.getPassword.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,l.Component),n(a,[{key:"hasValue",value:function(e){return e&&e.length}},{key:"getPassword",value:function(){return"matched"===this.state.match?this.state.password:null}},{key:"checkState",value:function(){return this.state.value_1!=this.state.value_2?(this.setState({match:"mismatch"}),t(this.input_1.current).closest(".form-group").removeClass("has-success"),t(this.input_2.current).closest(".form-group").removeClass("has-success"),t(this.input_1.current).closest(".form-group").addClass("has-error"),t(this.input_2.current).closest(".form-group").addClass("has-error"),this.props.onChange&&this.props.onChange(null)):this.state.value_1&&this.state.value_1.length?void this.setState({match:"matched",password:this.state.value_1},function(){return t(this.input_1.current).closest(".form-group").removeClass("has-error"),t(this.input_2.current).closest(".form-group").removeClass("has-error"),t(this.input_1.current).closest(".form-group").addClass("has-success"),t(this.input_2.current).closest(".form-group").addClass("has-success"),this.props.onChange&&this.props.onChange(this.state.password)}):(this.setState({match:"initial"}),t(this.input_1.current).closest(".form-group").removeClass("has-success"),t(this.input_2.current).closest(".form-group").removeClass("has-success"),t(this.input_1.current).closest(".form-group").addClass("has-error"),t(this.input_2.current).closest(".form-group").addClass("has-error"),this.props.onChange&&this.props.onChange(null))}},{key:"check_1",value:function(e){var t=this,a=e.target.value;this.setState({value_1:a},function(){t.checkState()})}},{key:"check_2",value:function(e){var t=this,a=e.target.value;this.setState({value_2:a},function(){t.checkState()})}},{key:"render",value:function(){return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6 col-sm-6 form-group"},l.createElement("input",{type:"password",className:"form-control",placeholder:"Password",onChange:this.check_1,ref:this.input_1,readOnly:!!this.props.readOnly})),l.createElement("div",{className:"col-md-6 col-sm-6 form-group"},l.createElement("input",{type:"password",className:"form-control",placeholder:"Repeat Password",onChange:this.check_2,ref:this.input_2,readOnly:!!this.props.readOnly})))}}]),a}()}.call(t,a,t,e))||(e.exports=r)}).call(this,a(2))},83:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),r=(c(a(2)),c(a(6))),n=c(a(1)),s=a(7),u=c(a(5)),i=c(a(11)),o=c(a(12));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={error:null,data:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.default.Component),l(t,[{key:"componentDidMount",value:function(){this.getDetails()}},{key:"getDetails",value:function(){var e=this,t=this.props.match.params.user_id||o.default.id();u.default.get("/vc-admin/user/detail/"+t).then(function(t){e.setState({data:t})},function(t){e.setState({error:t})})}},{key:"render",value:function(){if(!this.state.data)return n.default.createElement("span",null,"No data yet");var e=this.state.data.id,t=(this.state.data.firstName||"")+" "+(this.state.data.lastName||""),a=o.default.cached(),l=a.isInViewScope("users",this.state.data),u=a.isInEditScope("users",this.state.data),c=a.permFlags&&a.permFlags.admin3a||!1,d=a.isInViewScope("org",{orgId:a.user.orgId});return l?n.default.createElement("div",{className:"row",key:"pug:0:0"},n.default.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},n.default.createElement("div",{className:"x_panel"},n.default.createElement("div",{className:"x_title"},n.default.createElement("h2",{className:"text-center"},t),u?n.default.createElement("ul",{className:"nav navbar-right panel_toolbox",key:"pug:0:0"},n.default.createElement("li",null,n.default.createElement(s.Link,{to:"/vc-admin/user/edit/page/"+e},n.default.createElement("span",{className:"fa fa-pencil"})))):void 0,n.default.createElement("div",{className:"clearfix"})),n.default.createElement("div",{className:"x_content"},n.default.createElement("div",{className:"row"},n.default.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},n.default.createElement("table",{className:"table table-condensed table-striped table-bordered"},n.default.createElement("tbody",null,n.default.createElement("tr",null,n.default.createElement("td",null,"Id"),n.default.createElement("td",null,[this.state.data.id.replace(/:/g,"/")," "].join(""))),n.default.createElement("tr",null,n.default.createElement("td",null,"Name"),n.default.createElement("td",null,[t," "].join(""))),n.default.createElement("tr",null,n.default.createElement("td",null,"Email"),n.default.createElement("td",null,[this.state.data.email," "].join(""))),n.default.createElement("tr",null,n.default.createElement("td",null,"Role"),n.default.createElement("td",null,n.default.createElement(i.default,{Id:this.state.data.roleId,profile:"Role",noHyperLink:!c}))),n.default.createElement("tr",null,n.default.createElement("td",null,"Status"),n.default.createElement("td",null,[this.state.data.status," "].join(""))),n.default.createElement("tr",null,n.default.createElement("td",null,"Created By"),n.default.createElement("td",null,n.default.createElement(i.default,{Id:this.state.data.createdBy,profile:"User",noHyperLink:!0}))),n.default.createElement("tr",null,n.default.createElement("td",null,"Created On"),n.default.createElement("td",null,[(0,r.default)(this.state.data.createdTs).format("YYYY MM DD hh:mm a")," "].join(""))),n.default.createElement("tr",null,n.default.createElement("td",null,"Organization Id"),n.default.createElement("td",null," ",n.default.createElement(i.default,{Id:this.state.data.orgId,profile:"Org",noHyperLink:!d}))))))))))):n.default.createElement("span",{key:"pug:1:0"},"No scope for viewing this information",n.default.createElement("div",{className:"clearfix"}))}}]),t}();t.default=d},85:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),r=(c(a(2)),c(a(6)),c(a(1))),n=c(a(5)),s=c(a(51)),u=c(a(22)),i=c(a(24)),o=c(a(31));function c(e){return e&&e.__esModule?e:{default:e}}a(25);var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={xhrStatus:"init",errString:null,id:"",firstName:"",lastName:"",email:"",orgId:"",roleId:"",submitEnabled:!1,password:"",passEditEnabled:!1,submitPassEnabled:!1,passXHRStatus:"init",passErrString:null},a.check=a.check.bind(a),a.submit=a.submit.bind(a),a.getPassword=a.getPassword.bind(a),a.checkBoxChange=a.checkBoxChange.bind(a),a.submitPassword=a.submitPassword.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this;this.props.match.params.user_id&&this.setState({xhrStatus:"fetching",errString:null,submitEnabled:!1},function(){n.default.get("/vc-admin/user/detail/"+e.props.match.params.user_id).then(function(a){t.setState({xhrStatus:"init",id:a.id,firstName:a.firstName,lastName:a.lastName,email:a.email,orgId:{value:a.orgId},roleId:{value:a.roleId}},e.toggleSubmit)}).fail(function(e){t.setState({submitEnabled:!1,xhrStatus:"error",errString:e})})})}},{key:"hasValue",value:function(e){return e&&e.trim().length>0}},{key:"toggleSubmit",value:function(){var e=this.state;this.hasValue(e.id)&&this.hasValue(e.firstName)&&this.hasValue(e.lastName)&&this.hasValue(e.email)&&this.hasValue(e.orgId&&e.orgId.value)&&this.hasValue(e.roleId&&e.roleId.value)?this.setState({submitEnabled:!0}):this.setState({submitEnabled:!1})}},{key:"check",value:function(e){var t=this,a=e.key,l=e.value,r={};r[a]=l,this.setState(r,function(){return t.toggleSubmit()})}},{key:"checkBoxChange",value:function(e){var t=e.value.reset||!1;this.setState({passEditEnabled:t})}},{key:"getPassword",value:function(e){e&&this.setState({password:e,submitPassEnabled:!0})}},{key:"submit",value:function(e){e.preventDefault();var t=this;this.state.submitEnabled&&this.setState({submitEnabled:!1,xhrStatus:"submitting",errString:null},function(){var e=this,a={id:this.state.id,firstName:this.state.firstName,lastName:this.state.lastName,email:this.state.email,orgId:this.state.orgId.value,roleId:this.state.roleId.value};n.default.post("/vc-admin/user/edit/"+this.state.id,a).then(function(){if(t.setState({submitEnabled:!0,xhrStatus:"success",errString:null}),e.props.callback)return e.props.callback(null,e.state)}).fail(function(e){t.setState({submitEnabled:!0,xhrStatus:"error",errString:e})})})}},{key:"submitPassword",value:function(e){var t=this,a=this;this.setState({submitPassEnabled:!1,passXHRStatus:"submitting"},function(){n.default.post("/vc-admin/user/passwd/reset/",{id:t.props.match.params.user_id.replace(/:.*$/g,""),password:t.state.password}).then(function(){if(a.setState({submitPassEnabled:!0,passXHRStatus:"success",passErrString:null}),t.props.callback)return t.props.callback(null,t.state)}).fail(function(e){a.setState({submitPassEnabled:!0,passXHRStatus:"error",passErrString:e})})})}},{key:"render",value:function(){return this.props.match.params.user_id?r.default.createElement("div",null,r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},r.default.createElement("div",{className:"x_panel"},r.default.createElement("div",{className:"x_content"},r.default.createElement("h4",null,"Edit User")),r.default.createElement("div",{className:"x_content"},r.default.createElement("form",null,"fetching"===this.state.xhrStatus&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-12 col-sm-12"},r.default.createElement("span",{className:"fa fa-spinner fa-spin"}," "),r.default.createElement("span",null," Fetching info ..."))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-4 col-sm-4"},r.default.createElement(u.default,{value:this.state.id,disabled:!0,type:"text",placeholder:"User id"})),r.default.createElement("div",{className:"col-md-4 col-sm-4"},r.default.createElement(u.default,{value:this.state.firstName,_key:"firstName",type:"text",placeholder:"First name",onChange:this.check,validate:new RegExp(/^[a-zA-Z]+$/g),errorMessage:"only alphabets allowed"})),r.default.createElement("div",{className:"col-md-4 col-sm-4"},r.default.createElement(u.default,{value:this.state.lastName,_key:"lastName",type:"text",placeholder:"Last name",onChange:this.check,validate:new RegExp(/^[a-zA-Z]+$/g),errorMessage:"only alphabets allowed"}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-4 col-sm-4"},r.default.createElement(u.default,{value:this.state.email,_key:"email",type:"text",placeholder:"Email",onChange:this.check,validate:new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/g),errorMessage:"invalid email"})),r.default.createElement("div",{className:"col-md-4 col-sm-4"},r.default.createElement(i.default,{value:this.state.orgId&&this.state.orgId.value||"",_key:"orgId",placeholder:"Organization",onChange:this.check,url:"/vc-admin/org/list",mapper:function(e){return{label:e.name,value:e._id}}})),r.default.createElement("div",{className:"col-md-4 col-sm-4"},r.default.createElement(i.default,{value:this.state.roleId&&this.state.roleId.value||"",_key:"roleId",placeholder:"Role",onChange:this.check,url:"/vc-admin/roles/list",mapper:function(e){return{label:e.name,value:e._id}}}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-4 col-sm-4 form-group"},r.default.createElement("div",null,r.default.createElement("button",{type:"button",className:"btn btn-primary "+(this.state.submitEnabled?"":"disabled"),onClick:this.submit},"Submit"))))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-12 col-sm-12"},"submitting"==this.state.xhrStatus&&r.default.createElement("div",null,r.default.createElement("span",{className:"fa fa-spinner fa-spin"}," "),r.default.createElement("span",null," Connecting to server ...  ")),this.state.errString&&r.default.createElement("span",{className:"text-danger"}," ",this.state.errString," "),"success"==this.state.xhrStatus&&r.default.createElement("span",{className:"text-success"},' User "',this.state.firstName+" "+this.state.lastName,'" edited ok '))))))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},r.default.createElement("div",{className:"x_panel"},r.default.createElement("div",{className:"x_content"},r.default.createElement("h4",null,"Reset Password"),r.default.createElement(o.default,{onChange:this.checkBoxChange,_key:"reset",values:[{value:"reset",label:"Enable Reset",checked:this.passEditEnabled}]}),r.default.createElement("br",null),r.default.createElement("br",null),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-8 col-sm-8"},r.default.createElement(s.default,{onChange:this.getPassword,readOnly:!this.state.passEditEnabled}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-4 col-sm-4 form-group"},r.default.createElement("div",null,r.default.createElement("button",{type:"button",className:"btn btn-primary "+(this.state.submitPassEnabled?"":"disabled"),onClick:this.submitPassword},"Reset")))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-12 col-sm-12"},"submitting"==this.state.passXHRStatus&&r.default.createElement("div",null,r.default.createElement("span",{className:"fa fa-spinner fa-spin"}," "),r.default.createElement("span",null," Connecting to server ...  ")),this.state.passErrString&&r.default.createElement("span",{className:"text-danger"}," ",this.state.passErrString," "),"success"==this.state.passXHRStatus&&r.default.createElement("span",{className:"text-success"},' Password for "',this.state.firstName+" "+this.state.lastName,'" reset ok ')))))))):"No user specified"}}]),t}();t.default=d},86:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),r=(c(a(2)),c(a(6)),c(a(1))),n=c(a(5)),s=c(a(51)),u=c(a(22)),i=c(a(24)),o=c(a(12));function c(e){return e&&e.__esModule?e:{default:e}}a(25);var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={xhrStatus:"init",errString:null,id:null,firstName:null,lastName:null,password:null,email:null,orgId:null,roleId:null,submitEnabled:!1},a.errXHR=r.default.createRef(),a.okXHR=r.default.createRef(),a.submitBtn=r.default.createRef(),a.check=a.check.bind(a),a.submit=a.submit.bind(a),a.getPassword=a.getPassword.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),l(t,[{key:"hasValue",value:function(e){return e&&e.length}},{key:"toggleSubmit",value:function(){var e=this.state;this.hasValue(e.id)&&this.hasValue(e.firstName)&&this.hasValue(e.lastName)&&this.hasValue(e.password)&&this.hasValue(e.email)&&this.hasValue(e.orgId&&e.orgId.value)&&this.hasValue(e.roleId&&e.roleId.value)?this.setState({submitEnabled:!0}):this.setState({submitEnabled:!1})}},{key:"check",value:function(e){var t=this,a=e.key,l=e.value,r={};r[a]=l,this.setState(r,function(){return t.toggleSubmit()})}},{key:"getPassword",value:function(e){var t=this;this.setState({password:e},function(){return t.toggleSubmit()})}},{key:"submit",value:function(e){e.preventDefault();var t=this;this.state.submitEnabled&&this.setState({submitEnabled:!1,xhrStatus:"submitting",errString:null},function(){var e=this,a={id:this.state.id,firstName:this.state.firstName,lastName:this.state.lastName,email:this.state.email,orgId:this.state.orgId.value,roleId:this.state.roleId.value};n.default.post("/vc-admin/user/add",a).then(function(){return n.default.post("/vc-admin/user/passwd/",{id:e.state.id,password:e.state.password})}).then(function(){if(t.setState({submitEnabled:!0,xhrStatus:"success",errString:null}),e.props.callback)return e.props.callback(null,e.state)}).fail(function(e){t.setState({submitEnabled:!0,xhrStatus:"error",errString:e})})})}},{key:"render",value:function(){return o.default.cached().scopeAdd("users")?r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},r.default.createElement("div",{className:"x_panel"},r.default.createElement("div",{className:"x_content"},r.default.createElement("h4",null,"Add a new User"),r.default.createElement("br",null)),r.default.createElement("div",{className:"x_content"},r.default.createElement("form",null,r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-4 col-sm-4"},r.default.createElement(u.default,{_key:"id",type:"text",placeholder:"Preferred user id",onChange:this.check,validate:new RegExp(/^[a-zA-Z_0-9]+$/g),errorMessage:"only alphanumeric characters allowed"})),r.default.createElement("div",{className:"col-md-4 col-sm-4"},r.default.createElement(u.default,{_key:"firstName",type:"text",placeholder:"First name",onChange:this.check,validate:new RegExp(/^[a-zA-Z]+$/g),errorMessage:"only alphabets allowed"})),r.default.createElement("div",{className:"col-md-4 col-sm-4"},r.default.createElement(u.default,{_key:"lastName",type:"text",placeholder:"Last name",onChange:this.check,validate:new RegExp(/^[a-zA-Z]+$/g),errorMessage:"only alphabets allowed"}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-4 col-sm-4"},r.default.createElement(u.default,{_key:"email",type:"text",placeholder:"Email",onChange:this.check,validate:new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/g),errorMessage:"invalid email"})),r.default.createElement("div",{className:"col-md-4 col-sm-4"},r.default.createElement(i.default,{value:this.state.orgId,_key:"orgId",placeholder:"Organization",onChange:this.check,url:"/vc-admin/org/list",mapper:function(e){return{label:e.name,value:e._id}}})),r.default.createElement("div",{className:"col-md-4 col-sm-4"},r.default.createElement(i.default,{value:this.state.roleId,_key:"roleId",placeholder:"Role",onChange:this.check,url:"/vc-admin/roles/list",mapper:function(e){return{label:e.name,value:e._id}}}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-8 col-sm-8"},r.default.createElement(s.default,{onChange:this.getPassword})),r.default.createElement("div",{className:"col-md-4 col-sm-4 form-group"},r.default.createElement("div",null,r.default.createElement("button",{type:"button",className:"btn btn-primary "+(this.state.submitEnabled?"":"disabled"),onClick:this.submit},"Add !"))))),r.default.createElement("div",{className:"row"},"submitting"==this.state.xhrStatus&&r.default.createElement("div",null,r.default.createElement("span",{className:"fa fa-spinner fa-spin"}," "),r.default.createElement("span",null," Connecting to server ...  ")),this.state.errString&&r.default.createElement("span",{className:"text-danger col-md-12"}," ",this.state.errString," "),"success"==this.state.xhrStatus&&r.default.createElement("span",{className:"text-success col-md-12"},' User "',this.state.firstName+" "+this.state.lastName,'" added ok ')))))):r.default.createElement("span",null," No scope for add operation ")}}]),t}();t.default=d},87:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),r=(d(a(2)),d(a(6))),n=d(a(1)),s=d(a(18)),u=a(7),i=d(a(5)),o=d(a(11)),c=a(54);function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={error:null,loadRender:!1,items:[]},a.orgMap={},a.orgList=[],a.update_list=a.update_list.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.default.Component),l(t,[{key:"componentDidMount",value:function(){this.update_list()}},{key:"createOrgMap",value:function(){if(this.orgList)for(var e=0;e<this.orgList.length;e++)this.orgMap[this.orgList[e]._id]=this.orgList[e]}},{key:"update_list",value:function(){var e=this;i.default.get("/vc-admin/user/list").then(function(t){e.setState({loadRender:!0,items:t})},function(t){e.setState({loadRender:!0,error:t})})}},{key:"getOrgs",value:function(){var e=this,t=this;i.default.get("/vc-admin/org/list").then(function(a){e.orgList=a,e.createOrgMap();for(var l=t.state.items,r=0;r<l.length;r++){var n=l[r].orgId;l[r].org=e.orgMap[n]||{name:"-not-set-"}}t.setState({items:l})},function(e){t.setState({loadRender:!0,error:e})})}},{key:"render",value:function(){var e=this,t=[{Header:"",id:"select",Cell:n.default.createElement("input",{type:"checkbox"}),width:30},{Header:"Name",id:"fullName",accessor:function(e){return e.firstName+" "+e.lastName},Cell:function(e){var t=e.original.firstName+" "+e.original.lastName,a=e.original.id.split(":")[0];return n.default.createElement(u.Link,{to:"/vc-admin/user/detail/page/"+a},t)},sortMethod:function(e,t){var a=e&&e.toLowerCase(),l=t&&t.toLowerCase();return a<l?-1:a>l?1:0}},{Header:"Organization",id:"org",accessor:"orgId",Cell:function(e){return n.default.createElement(o.default,{Id:e.original.orgId,profile:"Org"})}},{Header:"Id",id:"ID",accessor:function(e){return e.id.split(":")[0]}},{Header:"Email",accessor:"email"},{Header:"Role",id:"role",Cell:function(t){var a=e.props.self.permFlags&&e.props.self.permFlags.admin3a||!1;return n.default.createElement(o.default,{Id:t.original.roleId,profile:"Role",noHyperLink:!a})}},{Header:"Added on",id:"AddedOn",accessor:function(e){return(0,r.default)(e.createdTs).format("DD MMM YYYY hh:mm a")}}];return n.default.createElement(s.default,{minRows:1,data:this.state.items,columns:t,defaultSorted:[{id:"fullName",desc:!1}],style:{width:"100%"},defaultSortMethod:c.defaultSort})}}]),t}();t.default=f},88:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),r=d(a(1)),n=a(7),s=d(a(87)),u=d(a(86)),i=d(a(85)),o=d(a(83)),c=d(a(12));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(e){return f(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return p(t,r.default.Component),l(t,[{key:"render",value:function(){return r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},this.props.self.scopeAdd("users")?r.default.createElement("div",{className:"x_panel",key:"pug:0:0"},r.default.createElement("div",{className:"x_content"},r.default.createElement("span",{className:"fa fa-plus"}," "),r.default.createElement(n.Link,{to:"/vc-admin/user/add/page"},"Add a new User"))):void 0,r.default.createElement("div",{className:"x_panel"},r.default.createElement("div",{className:"x_content"},r.default.createElement("h4",null,"User List"),r.default.createElement(s.default,{style:{width:"100%"},self:this.props.self})))))}}]),t}(),v=function(e){function t(e){f(this,t);var a=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={loading:!0,self:null,error:null},a}return p(t,r.default.Component),l(t,[{key:"componentDidMount",value:function(){var e=this;c.default.fetch().then(function(t){return e.setState({self:t,loading:!1})},function(t){return e.setState({error:t,loading:!1})})}},{key:"render",value:function(){var e=this;if(this.state.loading)return r.default.createElement("div",null,r.default.createElement("span",{className:"fa fa-spinner fa-spin"}),r.default.createElement("span",null,"  Loading ..."));if(this.state.error)return r.default.createElement("div",{className:"text-danger"},r.default.createElement("span",null,this.state.error));var t=this.state.self;return r.default.createElement("main",null,r.default.createElement(n.Switch,null,t.scopeView("users")?[t.isViewScopeSingular("users","id")?r.default.createElement(n.Redirect,{exact:!0,from:"/vc-admin/user/",to:"/vc-admin/user/page/detail",key:"pug:0:0:0:0"}):void 0,r.default.createElement(n.Route,{exact:!0,path:"/vc-admin/user/",render:function(){return r.default.createElement(h,{self:e.state.self})},key:"pug:0:2"}),t.scopeAdd("users")?r.default.createElement(n.Route,{path:"/vc-admin/user/add/page",component:u.default,key:"pug:0:3:2:0"}):void 0,t.scopeEdit("users")?r.default.createElement(n.Route,{path:"/vc-admin/user/edit/page/:user_id",component:i.default,key:"pug:0:5:4:0"}):void 0,r.default.createElement(n.Route,{path:"/vc-admin/user/page/detail",component:o.default,key:"pug:0:7"}),t.isViewScopeSingular("users","id")?void 0:r.default.createElement(n.Route,{path:"/vc-admin/user/detail/page/:user_id",component:o.default,key:"pug:0:8:6:0"})]:void 0,r.default.createElement(n.Route,{path:"/vc-admin/user/",render:function(){return r.default.createElement("span",null,"Forbidden - no scope for this operation")}})))}}]),t}();t.default=v},89:function(e,t,a){"use strict";a(2),i(a(21)),i(a(20));var l=i(a(19)),r=i(a(1)),n=a(9),s=a(7),u=i(a(88));function i(e){return e&&e.__esModule?e:{default:e}}a(23),(0,l.default)(function(){(0,n.render)(r.default.createElement(s.BrowserRouter,null,r.default.createElement(u.default,null)),document.getElementById("main"))})}});
//# sourceMappingURL=user-bundle.js.map