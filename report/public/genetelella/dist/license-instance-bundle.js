!function(e){function t(t){for(var n,c,u=t[0],i=t[1],o=t[2],d=0,f=[];d<u.length;d++)c=u[d],l[c]&&f.push(l[c][0]),l[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(s&&s(t);f.length;)f.shift()();return r.push.apply(r,o||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,u=1;u<a.length;u++){var i=a[u];0!==l[i]&&(n=!1)}n&&(r.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},l={4:0},r=[];function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},c.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var u=window.webpackJsonp=window.webpackJsonp||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var o=0;o<u.length;o++)t(u[o]);var s=i;r.push([103,0]),a()}({100:function(e,t,a){var n=a(99);"string"==typeof n&&(n=[[e.i,n,""]]);var l={hmr:!0,transform:void 0,insertInto:void 0};a(16)(n,l);n.locals&&(e.exports=n.locals)},101:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=(s(a(2)),s(a(6))),r=s(a(1)),c=s(a(18)),u=a(7),i=s(a(5)),o=s(a(11));function s(e){return e&&e.__esModule?e:{default:e}}a(25),a(100);var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={error:null,loadRender:!1,items:[]},a.orgMap={},a.orgList=[],a.templateMap={},a.templateList=[],a.invalidateBtn=r.default.createRef(),a.activateBtn=r.default.createRef(),a.update_list=a.update_list.bind(a),a.invalidate=a.invalidate.bind(a),a.activate=a.activate.bind(a),a.action=a.action.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),n(t,[{key:"componentDidMount",value:function(){this.update_list()}},{key:"createOrgMap",value:function(){if(this.orgList)for(var e=0;e<this.orgList.length;e++)this.orgMap[this.orgList[e]._id]=this.orgList[e]}},{key:"createTemplateMap",value:function(){if(this.templateList)for(var e=0;e<this.templateList.length;e++)this.templateMap[this.templateList[e]._id]=this.templateList[e]}},{key:"update_list",value:function(){var e=this;i.default.get("/vc-admin/lic/instance/list").then(function(t){e.setState({loadRender:!0,items:t})},function(t){e.setState({loadRender:!0,error:t})})}},{key:"getOrgs",value:function(){var e=this,t=this;i.default.get("/vc-admin/org/list").then(function(a){e.orgList=a,e.createOrgMap();for(var n=t.state.items,l=0;l<n.length;l++){var r=n[l].orgId;n[l].org=e.orgMap[r]||{name:"-not-set-"}}t.setState({items:n})},function(e){t.setState({loadRender:!0,error:e})})}},{key:"geTemplates",value:function(){var e=this,t=this;i.default.get("/vc-admin/lic/template/list").then(function(a){e.templateList=a,e.createTemplateMap();for(var n=t.state.items,l=0;l<n.length;l++){var r=n[l].templateId;n[l].template=e.templateMap[r]||{name:"-not-set-"}}t.setState({items:n})},function(e){t.setState({loadRender:!0,error:e})})}},{key:"activate",value:function(e){var t=this;!0===confirm("Are you sure to activate?")&&i.default.put("/vc-admin/lic/instance/activate",{id:e}).then(function(){if(t.update_list(),t.props.callback)return t.props.callback(null,t.state)}).fail(function(e){console.error("error :"+e),alert("Error, Try again.")})}},{key:"invalidate",value:function(e){var t=this;!0===confirm("Are you sure to invalidate?")&&i.default.put("/vc-admin/lic/instance/invalidate",{id:e}).then(function(){if(t.update_list(),t.props.callback)return t.props.callback(null,t.state)}).fail(function(e){console.error("error :"+e),alert("Error, Try again.")})}},{key:"test",value:function(e){return r.default.createElement("button",{type:"button",className:"btn btn-primary"},"Activate")}},{key:"action",value:function(e){var t=e.state,a=e._id;switch(t){case"activated":return r.default.createElement("a",{href:"javascript:void(0)",onClick:this.invalidate.bind(null,a)},r.default.createElement("span",null," Retire "));case"created":return r.default.createElement("a",{href:"javascript:void(0)",onClick:this.activate.bind(null,a)},r.default.createElement("span",null," Activate "));default:return}}},{key:"colorCodeRow",value:function(e,t,a){return t?{className:"state-"+t.row.state}:{}}},{key:"render",value:function(){var e=this,t=[{Header:"",id:"select",Cell:r.default.createElement("input",{type:"checkbox"}),width:30},{Header:"Id",accessor:"_id",Cell:function(e){return r.default.createElement(u.Link,{to:"/vc-admin/lic/instance/detail/page/"+e.original._id},e.value)}},{Header:"Organization",id:"org",Cell:function(e){return r.default.createElement(o.default,{Id:e.original.orgId,profile:"Org"})}},{Header:"Archetype",id:"archetype",Cell:function(e){return r.default.createElement(o.default,{Id:e.original.masterId,profile:"Template"})}},{Header:"State",accessor:"state",Cell:function(e){var t="state state-"+e.value,a="";switch(e.value){case"created":a="UN-ASSIGNED";break;case"activated":a="ACTIVE";break;case"deactivated":a="RETIRED";break;default:a=e.value}return r.default.createElement("div",{className:t},r.default.createElement("span",null," ",a," "))},width:140},{Header:"Created on",id:"createdOn",accessor:function(e){return f(e.createdTs)}},{Header:"Deactivated on",id:"deactivatedOn",accessor:function(e){return f(e.deactivatedTs)}},{Header:"Actions",id:"actions",Cell:function(t){return e.action(t.original)},width:100}];return r.default.createElement(c.default,{minRows:1,data:this.state.items,columns:t,style:{width:"100%"},getTrProps:this.colorCodeRow})}}]),t}(),f=function(e){return void 0===e?"-":(0,l.default)(e).format("YYYY MMM DD hh:mm a")};t.default=d},102:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=o(a(1)),r=a(7),c=o(a(101)),u=o(a(98)),i=o(a(97));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),n(t,[{key:"render",value:function(){return l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},l.default.createElement("div",{className:"x_panel"},l.default.createElement("div",{className:"x_content"},l.default.createElement("span",{className:"fa fa-plus"},"Â "),l.default.createElement(r.Link,{to:"/vc-admin/lic/instance/add-page"},"Add a new License Instance"))),l.default.createElement("div",{className:"x_panel"},l.default.createElement("div",{className:"x_content"},l.default.createElement("h4",null,"License Instance List"),l.default.createElement(c.default,{style:{width:"100%"}})))))}}]),t}();t.default=function(){return l.default.createElement("main",null,l.default.createElement(r.Switch,null,l.default.createElement(r.Route,{exact:!0,path:"/vc-admin/lic/instance",component:s}),l.default.createElement(r.Route,{path:"/vc-admin/lic/instance/add-page",component:u.default}),l.default.createElement(r.Route,{path:"/vc-admin/lic/instance/detail/page/:id",component:i.default})))}},103:function(e,t,a){"use strict";i(a(2)),i(a(21)),i(a(20));var n=i(a(19)),l=i(a(1)),r=a(9),c=a(7),u=i(a(102));function i(e){return e&&e.__esModule?e:{default:e}}a(23),(0,n.default)(function(){(0,r.render)(l.default.createElement(c.BrowserRouter,null,l.default.createElement(u.default,null)),document.getElementById("main"))})},97:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=(c(a(2)),c(a(1))),r=c(a(5));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={error:null,loadRender:!1,instance:{},template:{},org:{}},a.update_list=a.update_list.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),n(t,[{key:"componentDidMount",value:function(){this.update_list(this.props.match.params.id)}},{key:"update_list",value:function(e){var t=this;r.default.get("/vc-admin/lic/instance/detail/"+e).then(function(e){t.setState({loadRender:!0,instance:e.instance,template:e.template,org:e.org})},function(e){t.setState({loadRender:!0,error:e})})}},{key:"render",value:function(){return l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-md-4 col-sm-6 col-xs-12"},l.default.createElement("div",{className:"x_panel"},l.default.createElement("div",{className:"x_content"},l.default.createElement("h4",null,"License Instance Details"),l.default.createElement("br",null)),l.default.createElement("div",{className:"x_content"},l.default.createElement("table",{id:"table-archetype-detail",className:"table table-condensed table-striped"},l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,"ID"),l.default.createElement("td",null,this.state.instance._id)),l.default.createElement("tr",null,l.default.createElement("td",null,"State"),l.default.createElement("td",null,this.state.instance.state)),l.default.createElement("tr",null,l.default.createElement("td",null,"Created On"),l.default.createElement("td",null,this.state.instance.createdTs)),l.default.createElement("tr",null,l.default.createElement("td",null,"Created By"),l.default.createElement("td",null,this.state.instance.createdBy)),l.default.createElement("tr",null,l.default.createElement("td",null,"Activated On"),l.default.createElement("td",null,this.state.instance.activatedTs)),l.default.createElement("tr",null,l.default.createElement("td",null,"Invalidated On"),l.default.createElement("td",null,this.state.instance.deactivatedTs)),l.default.createElement("tr",null,l.default.createElement("td",null,"Invalidated By"),l.default.createElement("td",null,this.state.instance.deactivatedBy))))))),l.default.createElement("div",{className:"col-md-4 col-sm-6 col-xs-12"},l.default.createElement("div",{className:"x_panel"},l.default.createElement("div",{className:"x_content"},l.default.createElement("h4",null,"Associated License Archetype Details"),l.default.createElement("br",null)),l.default.createElement("div",{className:"x_content"},l.default.createElement("table",{id:"table-archetype-detail",className:"table table-condensed table-striped"},l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,"ID"),l.default.createElement("td",null,this.state.template._id)),l.default.createElement("tr",null,l.default.createElement("td",null,"Name"),l.default.createElement("td",null,this.state.template.name)),l.default.createElement("tr",null,l.default.createElement("td",null,"Max honthly hours"),l.default.createElement("td",null,this.state.template.maxHours)),l.default.createElement("tr",null,l.default.createElement("td",null,"Max concurrency"),l.default.createElement("td",null,this.state.template.maxConcurrency)),l.default.createElement("tr",null,l.default.createElement("td",null,"Max attendees"),l.default.createElement("td",null,this.state.template.maxAttendees)),l.default.createElement("tr",null,l.default.createElement("td",null,"License Duration (Days)"),l.default.createElement("td",null,this.state.template.licenseDuration)),l.default.createElement("tr",null,l.default.createElement("td",null,"Created By"),l.default.createElement("td",null,this.state.template.createdBy)),l.default.createElement("tr",null,l.default.createElement("td",null,"Created Timestamp"),l.default.createElement("td",null,this.state.template.createdTs))))))),l.default.createElement("div",{className:"col-md-4 col-sm-6 col-xs-12"},l.default.createElement("div",{className:"x_panel"},l.default.createElement("div",{className:"x_content"},l.default.createElement("h4",null,"Associated Organisation Details"),l.default.createElement("br",null)),l.default.createElement("div",{className:"x_content"},l.default.createElement("table",{id:"table-archetype-detail",className:"table table-condensed table-striped"},l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,"ID"),l.default.createElement("td",null,this.state.org._id)),l.default.createElement("tr",null,l.default.createElement("td",null,"Abbreviation"),l.default.createElement("td",null,this.state.org.abbrev)),l.default.createElement("tr",null,l.default.createElement("td",null,"Name"),l.default.createElement("td",null,this.state.org.name)),l.default.createElement("tr",null,l.default.createElement("td",null,"Email"),l.default.createElement("td",null,this.state.org.email)),l.default.createElement("tr",null,l.default.createElement("td",null,"Description"),l.default.createElement("td",null,this.state.org.maxConcurrency))))))))))}}]),t}();t.default=u},98:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=(u(a(2)),u(a(6)),u(a(1))),r=(u(a(9)),u(a(5))),c=u(a(24));function u(e){return e&&e.__esModule?e:{default:e}}a(53);var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={xhrStatus:"init",errString:null,template:null,org:null,submitEnabled:!1},a.check=a.check.bind(a),a.submit=a.submit.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),n(t,[{key:"hasValue",value:function(e){return e&&e.length}},{key:"toggleSubmit",value:function(){var e=this.state;this.state.template&&this.state.org&&this.hasValue(e.template.value)&&this.hasValue(e.org.value)?this.setState({submitEnabled:!0}):this.setState({submitEnabled:!1})}},{key:"check",value:function(e){var t=this,a=e.key,n=e.value,l={};l[a]=n,this.setState(l,function(){return t.toggleSubmit()})}},{key:"submit",value:function(e){e.preventDefault();var t=this;this.state.submitEnabled&&this.setState({submitEnabled:!1,xhrStatus:"submitting",errString:null},function(){var e=this,a={org:this.state.org.value,template:this.state.template.value};r.default.post("/vc-admin/lic/instance/add",a).then(function(){if(t.setState({submitEnabled:!0,xhrStatus:"success",errString:null}),e.props.callback)return e.props.callback(null,e.state)}).fail(function(e){t.setState({submitEnabled:!0,xhrStatus:"error",errString:e})})})}},{key:"render",value:function(){return l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},l.default.createElement("div",{className:"x_panel"},l.default.createElement("div",{className:"x_content"},l.default.createElement("h4",null,"Add a new License Instance")),l.default.createElement("div",{className:"x_content"},l.default.createElement("form",null,l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-md-4 col-sm-6 form-group"},l.default.createElement(c.default,{value:this.state.org,_key:"org",placeholder:"Select Organization",onChange:this.check,url:"/vc-admin/org/list",mapper:function(e){return{label:e.name,value:e._id}}})),l.default.createElement("div",{className:"col-md-4 col-sm-6 form-group"},l.default.createElement(c.default,{value:this.state.template,_key:"template",placeholder:"Select Archetype",onChange:this.check,url:"/vc-admin/lic/template/list",mapper:function(e){return{label:e.name,value:e._id}}}))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-md-2 col-sm-2 form-group"},l.default.createElement("div",null,l.default.createElement("button",{type:"button",className:"btn btn-primary "+(this.state.submitEnabled?"":"disabled"),onClick:this.submit},"Create !"))))),l.default.createElement("div",{className:"row"},"submitting"==this.state.xhrStatus&&l.default.createElement("div",null,l.default.createElement("span",{className:"fa fa-spinner fa-spin"}," "),l.default.createElement("span",null," Connecting to server ...  ")),this.state.errString&&l.default.createElement("span",{className:"text-danger col-md-12"}," ",this.state.errString," "),"success"==this.state.xhrStatus&&l.default.createElement("span",{className:"text-success col-md-12"},' License Instance created for "',this.state.org.label,' " of type "',this.state.template.label,'"'))))))}}]),t}();t.default=i},99:function(e,t,a){(e.exports=a(17)(!1)).push([e.i,".rt-td .state {\n  text-align: center;\n  border-radius: 2px;\n}\n.state.state-activated {\n  color: white;\n  background-color: #1ABB9C;\n}\n.state-deactivated {\n  text-decoration: line-through;\n}\n.state.state-deactivated {\n  color: white;\n  background-color: #88a0b9;\n}\n.state.state-created {\n  color: white;\n  background-color: #FD8218;\n}\n.rt-td:last-child {\n  text-align: center;\n}\na > span.fa {\n  width: 14px;\n}\n",""])}});
//# sourceMappingURL=license-instance-bundle.js.map